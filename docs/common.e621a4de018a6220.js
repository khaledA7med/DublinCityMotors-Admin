"use strict";(self.webpackChunkDublinCityMotors=self.webpackChunkDublinCityMotors||[]).push([[76],{3227:(v,p,l)=>{l.d(p,{p:()=>b});var e=l(4341),n=l(8699),g=l(788),m=l(2923),f=l(7402),u=l(177),_=l(1345);function h(d,s){1&d&&n.nrm(0,"span",22)}let b=(()=>{class d{constructor(r,t,i){this.modal=r,this.CarStaticDataService=t,this.messages=i,this.makes=[{id:1,name:"Audi"},{id:2,name:"BMW"},{id:3,name:"Mercedes"}],this.submit=!1}ngOnInit(){this.getAllMake(),this.initMakeForm()}initMakeForm(){this.modelForm=new e.gE({makeId:new e.MJ,year:new e.MJ,name:new e.MJ("")})}getAllMake(){return this.CarStaticDataService.getAllMake().subscribe(r=>{r&&(this.makes=r)},r=>{this.messages.toast(r.error.message,"error")})}onSubmit(){this.submit=!0,this.CarStaticDataService.addModel(this.modelForm.value).subscribe(r=>{this.submit=!1,this.messages.toast("Make Added successfully","success"),this.modal.close()},r=>{this.submit=!1,this.messages.toast(r.error.message,"error")})}reset(){this.modelForm.reset()}static#e=this.\u0275fac=function(t){return new(t||d)(n.rXU(g.Lw),n.rXU(m.I),n.rXU(f.G))};static#t=this.\u0275cmp=n.VBU({type:d,selectors:[["app-model-form"]],decls:35,vars:5,consts:[[1,"gift-ribbon-wrapper"],[1,"gift-ribbon"],[1,"modal-header","mb-0"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[3,"formGroup","ngSubmit"],[1,"modal-body","p-1","m-2","mt-5",2,"overflow-y","unset !important"],[1,"row"],[1,"col-12","mb-4"],[1,"float-label"],["placeholder","Select Make","formControlName","makeId","bindLabel","name","bindValue","id",3,"items","loading","searchable"],["for",""],["type","text","formControlName","name","placeholder","Enter Model Name",1,"form-control"],[1,"col-12"],["type","number","formControlName","year","placeholder","Enter Model Year",1,"form-control"],[1,"modal-footer"],["type","submit",1,"btn","btn-sm","btn-outline-success","mx-2","d-flex","align-items-center"],[1,"bx","bx-save","me-1"],["class","spinner-border spinner-border-sm ms-2",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-outline-info","mx-2","d-flex","align-items-center",3,"click"],[1,"bx","bx-clipboard","me-1"],["type","button",1,"btn","btn-outline-danger","btn-sm","d-flex","align-items-center",3,"click"],[1,"bx","bx-x","me-1"],[1,"spinner-border","spinner-border-sm","ms-2"]],template:function(t,i){1&t&&(n.j41(0,"div")(1,"div",0)(2,"div",1),n.EFF(3,"New Model"),n.k0s()(),n.j41(4,"div",2)(5,"button",3),n.bIt("click",function(){return i.modal.dismiss("Cross click")}),n.k0s()(),n.j41(6,"form",4),n.bIt("ngSubmit",function(){return i.onSubmit()}),n.j41(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8),n.nrm(11,"ng-select",9),n.j41(12,"label",10),n.EFF(13,"Make"),n.k0s()()(),n.j41(14,"div",7)(15,"div",8),n.nrm(16,"input",11),n.j41(17,"label"),n.EFF(18,"Model Name"),n.k0s()()(),n.j41(19,"div",12)(20,"div",8),n.nrm(21,"input",13),n.j41(22,"label"),n.EFF(23,"Model Year"),n.k0s()()()()(),n.j41(24,"div",14)(25,"button",15),n.nrm(26,"i",16),n.EFF(27," Save "),n.DNE(28,h,1,0,"span",17),n.k0s(),n.j41(29,"button",18),n.bIt("click",function(){return i.reset()}),n.nrm(30,"i",19),n.EFF(31," Clear "),n.k0s(),n.j41(32,"button",20),n.bIt("click",function(){return i.modal.dismiss("Cross click")}),n.nrm(33,"i",21),n.EFF(34," Close "),n.k0s()()()()),2&t&&(n.R7$(6),n.Y8G("formGroup",i.modelForm),n.R7$(5),n.Y8G("items",i.makes)("loading",!i.makes)("searchable",!0),n.R7$(17),n.Y8G("ngIf",i.submit))},dependencies:[u.bT,_.vr,e.qT,e.me,e.Q0,e.BC,e.cb,e.j4,e.JD]})}return d})()},8704:(v,p,l)=>{l.d(p,{H:()=>d});var e=l(8699),n=l(7402),g=l(2923),m=l(177);let f=(()=>{class s{constructor(){this.fileOver=!1,this.fileDropped=new e.bkB}onDragOver(t){t.preventDefault(),t.stopPropagation(),this.fileOver=!0}onDragLeave(t){t.preventDefault(),t.stopPropagation(),this.fileOver=!1}onDrop(t){t.preventDefault(),t.stopPropagation(),this.fileOver=!1;let i=t.dataTransfer.files;i.length>0&&this.fileDropped.emit(i)}static#e=this.\u0275fac=function(i){return new(i||s)};static#t=this.\u0275dir=e.FsC({type:s,selectors:[["","appDnd",""]],hostVars:2,hostBindings:function(i,o){1&i&&e.bIt("dragover",function(c){return o.onDragOver(c)})("dragleave",function(c){return o.onDragLeave(c)})("drop",function(c){return o.onDrop(c)}),2&i&&e.AVh("draggable-items",o.fileOver)},outputs:{fileDropped:"fileDropped"}})}return s})();function u(s,r){1&s&&(e.j41(0,"div",7)(1,"label",8)(2,"div"),e.nrm(3,"i",9),e.k0s(),e.j41(4,"div"),e.EFF(5," Drop files here or click to upload "),e.j41(6,"span",10),e.nrm(7,"br"),e.EFF(8,"image"),e.k0s()()()())}const _=function(s){return{"justify-content-end":s}};function h(s,r){if(1&s&&(e.j41(0,"div",11)(1,"label",12),e.nrm(2,"i",13),e.EFF(3," Insert "),e.k0s()()),2&s){const t=e.XpG();e.Y8G("ngClass",e.eq3(1,_,t.btnEnd))}}function b(s,r){if(1&s){const t=e.RV6();e.j41(0,"div",14)(1,"div",15)(2,"div",16)(3,"div",17)(4,"img",18),e.bIt("error",function(o){e.eBV(t);const a=e.XpG();return e.Njj(a.errorImages(o))}),e.k0s()(),e.j41(5,"div",19)(6,"div",20)(7,"h6",21),e.EFF(8),e.k0s()()(),e.j41(9,"div",22)(10,"div",23)(11,"button",24),e.bIt("click",function(){const a=e.eBV(t).$implicit,c=e.XpG();return e.Njj(c.removeImage(a))}),e.nrm(12,"i",25),e.k0s()()()()()()}if(2&s){const t=r.$implicit;e.R7$(4),e.Y8G("src",t.data,e.B4B),e.R7$(4),e.JRh(t.name)}}let d=(()=>{class s{constructor(t,i,o){this.messageService=t,this.cdr=i,this.carsService=o,this.documentsToUpload=[],this.documentsToDisplay=[],this.subscriptions=[],this.isBtn=!1,this.btnEnd=!1,this.existingFiles=[],this.files=new e.bkB}ngOnChanges(t){this.existingFiles.forEach(i=>{this.documentsToDisplay.push({data:"./../../../../../assets/images/1.jpg",name:i.split("\\").pop(),type:"image",isUploaded:!1})})}convertPathToURL(t){return t}fileIcon(t){return{"image/jpeg":{cls:"text-danger",ico:"ri-image-line"},"image/png":{cls:"text-danger",ico:"ri-image-line"},"image/gif":{cls:"text-danger",ico:"ri-image-line"},"application/pdf":{cls:"text-info",ico:"ri-file-pdf-line"},"application/msword":{cls:"text-primary",ico:"ri-file-word-line"},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{cls:"text-primary",ico:"ri-file-word-line"},"application/vnd.ms-excel":{cls:"text-success",ico:"ri-file-excel-line"},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{cls:"text-success",ico:"ri-file-excel-line"},"text/plain":{cls:"text-secondary",ico:"ri-file-text-line"}}[t]||{cls:"text-secondary",ico:"ri-file-line"}}onFileLoaded(t){const i=new FileReader;i.onload=o=>{this.documentsToDisplay.push({id:Date.now(),name:t.name,size:t.size,type:t.type,data:o.target?.result}),this.emitFiles(),this.cdr.detectChanges()},i.readAsDataURL(t)}handleSelectedFiles(t){for(let i=0;i<t.length;i++)this.documentsToUpload.push(t[i]),this.onFileLoaded(t[i])}onSelectFiles(t){this.handleSelectedFiles(t.target.files)}onFileDropped(t){this.handleSelectedFiles(t)}removeImage(t){this.messageService.confirm("Delete!","Are you sure?","danger","question").then(i=>{i.isConfirmed&&(!1===t.isUploaded?this.carsService.deleteImage({imagePath:t.data}).subscribe({next:()=>{this.documentsToDisplay=this.documentsToDisplay.filter(a=>a!==t),this.emitFiles(),this.cdr.detectChanges()},error:a=>console.error("Error deleting image:",a)}):(this.documentsToDisplay=this.documentsToDisplay.filter(o=>o!==t),this.documentsToUpload=this.documentsToUpload.filter(o=>o.name!==t.name),this.emitFiles(),this.cdr.detectChanges()))})}emitFiles(){this.files.emit(this.documentsToUpload)}errorImages(t){}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}static#e=this.\u0275fac=function(i){return new(i||s)(e.rXU(n.G),e.rXU(e.gRc),e.rXU(g.I))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-dropzone"]],inputs:{isBtn:"isBtn",btnEnd:"btnEnd",existingFiles:"existingFiles"},outputs:{files:"files"},features:[e.OA$],decls:7,vars:3,consts:[["id","documentsBody","appDnd","","aria-labelledby","documentsHead",1,"accordion-collapse","collapse","show","px-2",3,"fileDropped"],[1,"container-fluid"],["class","filezone-container mx-auto text-center",4,"ngIf"],["type","file","id","inputDocuments","accept","image/*","multiple","",3,"change"],["class","d-flex",3,"ngClass",4,"ngIf"],[1,"row","files-views"],["class","col-xl-4 col-lg-4 col-md-6 col-sm-12 p-0",4,"ngFor","ngForOf"],[1,"filezone-container","mx-auto","text-center"],["for","inputDocuments","id","img-label"],[1,"bx","bx-cloud-upload"],[1,"text-black-50","mx-3","fs-14"],[1,"d-flex",3,"ngClass"],["for","inputDocuments","id","img-label-button",1,"btn","btn-sm","btn-outline-success"],[1,"ri-file-upload-line"],[1,"col-xl-4","col-lg-4","col-md-6","col-sm-12","p-0"],[1,"card","m-1"],[1,"row","align-items-center","g-0","overflow-hidden"],[1,"col-4","h-100"],["id","file-preview",1,"img-fluid","rounded","shadow-sm",3,"src","error"],[1,"col-6"],[1,"card-body","py-2"],[1,"card-title","fs-13"],[1,"col-2"],[1,"border-0","py-1"],["type","button",1,"btn","btn-outline-danger","btn-icon","waves-effect","waves-light","doc-btn",3,"click"],[1,"bx","bx-trash"]],template:function(i,o){1&i&&(e.j41(0,"div",0),e.bIt("fileDropped",function(c){return o.onFileDropped(c)}),e.j41(1,"div",1),e.DNE(2,u,9,0,"div",2),e.j41(3,"input",3),e.bIt("change",function(c){return o.onSelectFiles(c)}),e.k0s(),e.DNE(4,h,4,3,"div",4),e.j41(5,"div",5),e.DNE(6,b,13,2,"div",6),e.k0s()()()),2&i&&(e.R7$(2),e.Y8G("ngIf",!o.isBtn),e.R7$(2),e.Y8G("ngIf",o.isBtn),e.R7$(2),e.Y8G("ngForOf",o.documentsToDisplay))},dependencies:[m.YU,m.Sq,m.bT,f],styles:[".draggable-items[_ngcontent-%COMP%]   .filezone-container[_ngcontent-%COMP%]{border:2px solid rgba(133,132,132,.4);background-color:#e2e2e26e}.draggable-items[_ngcontent-%COMP%]   .filezone-container[_ngcontent-%COMP%]   #img-label[_ngcontent-%COMP%]{color:#86858561}input#inputDocuments[_ngcontent-%COMP%]{display:none}.filezone-container[_ngcontent-%COMP%]{padding:10px;border:2px dashed #878a99;border-radius:10px}.filezone-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .filezone-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:middle}.filezone-container[_ngcontent-%COMP%]   #img-label[_ngcontent-%COMP%]{text-align:center;display:flex;justify-content:center;align-items:center;flex-direction:column;color:#878a99;font-size:20px;font-weight:bolder;cursor:pointer;height:100%;width:100%}.filezone-container[_ngcontent-%COMP%]   #img-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:60px;font-weight:400}.filezone-container[_ngcontent-%COMP%]   #img-label[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#878a99!important}@media screen{.filezone-container[_ngcontent-%COMP%]{font-size:15px}}.files-views[_ngcontent-%COMP%]{margin:20px 0 0}.files-views[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{min-width:33.33%}.files-views[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{box-shadow:#0000001a 0 0 5px,#0000001a 0 0 1px;height:100px}.files-views[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100px;width:100%}@media screen and (max-width: 300px){.files-views[_ngcontent-%COMP%]{margin:20px 0 0}.files-views[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{min-width:100%}.files-views[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{box-shadow:#0000001a 0 0 5px,#0000001a 0 0 1px;height:100px}.files-views[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100px;width:30%}}"],changeDetection:0})}return s})()}}]);